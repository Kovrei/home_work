
# Домашнее задание к занятию «Уязвимости и атаки на информационные системы». Осипенков АЮ

### Задание 1

Скачайте и установите виртуальную машину Metasploitable: https://sourceforge.net/projects/metasploitable/.

Это типовая ОС для экспериментов в области информационной безопасности, с которой следует начать при анализе уязвимостей.

Просканируйте эту виртуальную машину, используя **nmap**.

Попробуйте найти уязвимости, которым подвержена эта виртуальная машина.

Сами уязвимости можно поискать на сайте https://www.exploit-db.com/.

Для этого нужно в поиске ввести название сетевой службы, обнаруженной на атакуемой машине, и выбрать подходящие по версии уязвимости.

Ответьте на следующие вопросы:

- Какие сетевые службы в ней разрешены?
- Какие уязвимости были вами обнаружены? (список со ссылками: достаточно трёх уязвимостей)
  
*Приведите ответ в свободной форме.*  


### Решение 1

```
nmap -sV 192.168.56.103
```
или
```
nmap -A 192.168.56.103
```
**Уязвимости**
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-01-01.PNG?raw=true)

21/tcp   open  ftp         vsftpd 2.3.4 - https://www.exploit-db.com/exploits/17491   
25/tcp   open  smtp        Postfix smtpd - https://www.exploit-db.com/exploits/48038  
6667/tcp open  irc         UnrealIRCd - https://www.exploit-db.com/exploits/16922  

------

### Задание 2

Проведите сканирование Metasploitable в режимах SYN, FIN, Xmas, UDP.

Запишите сеансы сканирования в Wireshark.

Ответьте на следующие вопросы:

- Чем отличаются эти режимы сканирования с точки зрения сетевого трафика?
- Как отвечает сервер?

*Приведите ответ в свободной форме.*

### Решение 2
**Сканирование Metasploitable в режиме SYN**
```
sudo nmap -sS -p 22 192.168.56.103
```
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-02-1.PNG?raw=true)

52543 - 22 [SYN] - Отправитель отправил пакет  
22 - 52543 [SYN, ACK] - Получатель подтвердил получение пакета и отправил пакет  
52543 - 22 [RST] - отправитель прерывает 

22 порт открыт  

```
sudo nmap -sS -p 995 192.168.56.103
```
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-02-2.PNG?raw=true)

52507 - 995 [SYN] - Отправитель отправил пакет  
995 - 52507 [RST. ACK] - получатель прерывает пакет на полученный ответ 

995 порт закрыт  

**Cканирование SYN часто называют “полуоткрытым” или “скрытым” сканированием. SYN-сканирование работает так же, как сканирование TCP Connect с закрытыми и отфильтрованными портами, т.Е. Получает ПЕРВЫЙ пакет для закрытого порта и не отвечает для отфильтрованных портов. Единственное различие заключается в том, как они обрабатывают открытые порты. SYN scan отправляет ответный пакет на сервер с установленным ФЛАГОМ СБРОСА (но не ACK, который обычно используется по умолчанию при фактическом трехстороннем квитировании) после получения SYN / ACK от целевого сервера. Это делается для того, чтобы сервер не мог постоянно отправлять запросы на установление соединения и тем самым сократить время сканирования.**

**Сканирование Metasploitable в режиме FIN**
```
sudo nmap -sА -p 22 192.168.56.103
```
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-02-3.PNG?raw=true)

39517 - 22 [ACK] - отправитель отправляет ответ на полученный пакет  
22 - 39517 [RST] - получатель прерывает пакет  

22 порт открыт  

```
sudo nmap -sА -p 995 192.168.56.103
```
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-02-4.PNG?raw=true)

45205 - 995 [ACK] - отправитель отправляет ответ на полученный пакет 
995 - 45205 [RST] - получатель прерывает пакет  

995 порт закрыт  

**FIN scan вместо отправки полностью пустых пакетов отправляет пакет с установленным флагом FIN. Если порт закрыт, хост отвечает RST.**

**Сканирование Metasploitable в режиме Xmas**
```
sudo nmap -sX -p 22 192.168.56.103
```
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-02-5.PNG?raw=true)

37771 - 22 [FIN, PSH, URG] - данных для отправки нет, любые данные отправлены по TCP протоколы, приоритетные 
37771 - 22 [FIN, PSH, URG] - данных для отправки нет, любые данные отправлены по TCP протоколы, приоритетные 

22 порт открыт  

```
sudo nmap -sX -p 995 192.168.56.103
```
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-02-6.PNG?raw=true)

38102 - 995 [FIN, PSH, URG] - пакетов для отправки нет, любые пакеты будут отправлены по TCP протоколы, приоритетные 
995 - 38102 [RST. ACK]  - получатель прерывает пакет на полученный ответ

995 порт закрыт  

**РОЖДЕСТВЕНСКОЕ сканирование, отправляет пакет с установленными флагами URG, PSH, FIN. Это сканирование получило свое название из-за того, что оно выглядит как рождественская елка, если рассматривать его как захват пакета в Wireshark. Если порт закрыт, хост отвечает RST.**

**Сканирование Metasploitable в режиме UDP**
```
sudo nmap -sU -p 22 192.168.56.103
```
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-02-7.PNG?raw=true)

41565 - 22  

```
sudo nmap -sU -p 995 192.168.56.103
```
![alt text](https://github.com/Kovrei/home_work/blob/main/syssec/13-01/img/13-02-8.PNG?raw=true)

39092 - 995

*  **Когда после отправки UDP-пакета нет ответа от целевого порта, это часто означает, что порт либо “открыт”, либо работает за брандмауэром, т.Е. “фильтруется”, и в этом случае сервер просто отбросит пакет без ответа.**
*  **UDP-сканирование может эффективно идентифицировать закрытые порты, поскольку целевой UDP-порт отвечает ICMP-пакетом с сообщением о том, что порт недоступен.**

